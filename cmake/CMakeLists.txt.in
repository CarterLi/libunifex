# Copyright (c) 2018-present, Facebook, Inc.
#
# This source code is licensed under the Apache License found in the
# LICENSE file in the root directory of this source tree.

cmake_minimum_required(VERSION 2.8.2)

project(googletest-download NONE)

include(ExternalProject)
ExternalProject_Add(googletest
  GIT_REPOSITORY    https://github.com/google/googletest.git
  GIT_TAG           master
  SOURCE_DIR        "${CMAKE_CURRENT_BINARY_DIR}/googletest-src"
  BINARY_DIR        "${CMAKE_CURRENT_BINARY_DIR}/googletest-build"
  BUILD_COMMAND     ""
  INSTALL_COMMAND   ""
  TEST_COMMAND      ""
  CMAKE_ARGS        "-DCMAKE_CXX_COMPILER:PATH=${CMAKE_CXX_COMPILER}"
                    $<$<BOOL:${UNIFEX_CXX_COMPILER_CLANG}>:-DCMAKE_CXX_FLAGS:STRING=-stdlib=libc++>
                    # $<$<BOOL:${UNIFEX_CXX_COMPILER_CLANG}>:-DCMAKE_EXE_LINKER_FLAGS:STRING=-lc++>
                    # $<$<BOOL:${UNIFEX_CXX_COMPILER_CLANG}>:-DCMAKE_STATIC_LINKER_FLAGS:STRING=-lc++>
)
